<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Xmas Wish Tree</title>

<style>
/* ===== 背景 ===== */
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family:"楷体","KaiTi",cursive;
  background:
    radial-gradient(circle at 20% 80%, rgba(255,140,66,.6), transparent 65%),
    radial-gradient(circle at 80% 20%, rgba(0,150,136,.3), transparent 50%),
    radial-gradient(circle at 40% 60%, #ff9d5c 0%, #3a1c71 35%, #1a2a6c 70%, #0d1b2a 100%);
  background-size:200% 200%;
  animation:bgMove 14s ease-in-out infinite;
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ===== 背景雪花（蓝白） ===== */
.bg-snow{
  position:fixed;
  top:-20px;
  pointer-events:none;
  z-index:1;
  animation:fall linear infinite;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}

/* ===== 树容器 ===== */
.tree{
  position:relative;
  width:560px;
  height:680px;
  z-index:10;
}

/* ===== 树顶文字 ===== */
.tree-msg{
  position:absolute;
  top:6px;
  left:50%;
  transform:translateX(-50%);
  max-width:90%;
  font-family:'Lucida Handwriting', cursive;
  font-style:italic;
  font-size:13px;
  color:#ffc0cb;
  text-align:center;
  line-height:1.2em;
  text-shadow:0 0 6px #add8e6, 0 0 12px #add8e6;
  pointer-events:none;
  z-index:35;
  white-space:pre-wrap;
}

/* ===== 署名 ===== */
.tree-sign{
  position:absolute;
  bottom:100px;
  left:50%;
  transform:translateX(-50%);
  font-family:'Lucida Handwriting', cursive;
  font-style:italic;
  font-size:12px;
  color:rgba(255,236,139,0.75);
  text-shadow:0 0 6px rgba(255,80,80,0.45);
  opacity:.85;
  pointer-events:none;
  z-index:25;
  animation:signBreathe 4s ease-in-out infinite;
}
@keyframes signBreathe{
  0%,100%{opacity:.6}
  50%{opacity:.95}
}

/* ===== 伯利恒星（定位 & 旋转分离） ===== */
.star-top{
  position:absolute;
  top:-28px;
  left:50%;
  transform:translateX(-50%);
  z-index:40;
}
.star-inner{
  display:block;
  font-size:48px;
  color:#ffec8b;
  text-shadow:0 0 12px rgba(255,215,0,.7);
  transition:transform 1.3s linear;
}

/* ===== 粒子 ===== */
.dot{
  position:absolute;
  transition:
    transform 1.3s cubic-bezier(.16,1,.3,1),
    opacity 1.3s ease;
  opacity:.6;
}
.dot.snow{
  width:4px;height:4px;border-radius:50%;
  background:#ffd27d;
  box-shadow:0 0 6px rgba(255,200,120,.8);
}
.dot.star,.dot.big-star{
  display:inline-block;
  line-height:1;
}
.dot.star{
  font-size:12px;
  color:#7a1f2b;
  text-shadow:0 0 6px rgba(160,40,40,.8);
}
.dot.big-star{
  font-size:14px;
  color:#b11226;
  text-shadow:0 0 8px rgba(200,30,40,.9);
}
.dot.breathe{
  animation:breathe 3s ease-in-out infinite;
}
@keyframes breathe{
  0%,100%{opacity:.35}
  50%{opacity:1}
}

/* ===== 祝福文字 ===== */
#wishText{
  position:absolute;
  left:50%;
  top:410px;
  transform:translateX(-50%);
  font-size:34px;
  font-style:italic;
  color:#ffec8b;
  text-shadow:0 0 8px red;
  opacity:0;
  transition:opacity .4s ease;
  z-index:40;
}
#geoText{
  position:absolute;
  left:50%;
  top:470px;
  transform:translateX(-50%);
  font-size:18px;
  color:#ffec8b;
  text-shadow:0 0 8px red;
  opacity:0;
  transition:opacity .4s ease;
  z-index:40;
}

/* ===== 输入区 ===== */
.wish-box{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  z-index:50;
}
.row{display:flex;gap:6px;}
input{
  width:240px;
  padding:6px 12px;
  border-radius:20px;
  border:none;
  background:rgba(128,0,0,.6);
  color:#fff;
}
button{
  padding:6px 14px;
  border-radius:14px;
  border:none;
  background:#8b0000;
  color:#fff;
  cursor:pointer;
}
.disclaimer{
  margin-top:6px;
  font-size:12px;
  color:#fff;
  opacity:.85;
}
</style>
</head>

<body>

<div class="tree" id="tree">

  <div class="tree-msg">
This personalized Xmas tree for my beloved Shantel —
all my best wishes for you
  </div>

  <div class="star-top" id="star">
    <span class="star-inner">★</span>
  </div>

  <div class="tree-sign">
Designed by your Chloe, 18th 12 2025
  </div>

</div>

<div id="wishText">Merry Christmas</div>
<div id="geoText"></div>

<div class="wish-box">
  <div class="row">
    <input id="wishInput" placeholder="Type your wish…">
    <button id="sendBtn">SEND</button>
  </div>
  <div class="disclaimer">
    ★ Your wish is your own, we don’t record personal info ★<br>
    ★ Address shown only for display ★
  </div>
</div>

<script>
/* ===== 背景雪花 ===== */
['#ffffff','#a0d0ff'].forEach(color=>{
  for(let i=0;i<30;i++){
    const s=document.createElement('div');
    s.className='bg-snow';
    s.textContent='❄';
    s.style.color=color;
    s.style.left=Math.random()*100+'vw';
    s.style.fontSize=10+Math.random()*16+'px';
    s.style.opacity=.3+Math.random()*.6;
    s.style.animationDuration=6+Math.random()*6+'s';
    s.style.animationDelay=Math.random()*5+'s';
    document.body.appendChild(s);
  }
});

/* ===== 树粒子 ===== */
const tree=document.getElementById('tree');
const dots=[];
const CENTER=280, TOP=120, BOTTOM=600, R=190;

for(let i=0;i<400;i++){
  const t=Math.random();
  const y=BOTTOM-t*(BOTTOM-TOP);
  const radius=R*(1-t);
  const angle=t*Math.PI*8;
  const x=CENTER+Math.cos(angle)*radius+(Math.random()-.5)*18;

  const d=document.createElement('div');
  const r=Math.random();
  if(r<0.5){
    d.className='dot snow breathe';
  }else if(r<0.75){
    d.className='dot star breathe';
    d.textContent='✦';
  }else{
    d.className='dot big-star breathe';
    d.textContent='★';
  }
  d.style.left=x+'px';
  d.style.top=y+'px';
  tree.appendChild(d);
  dots.push(d);
}

/* ===== 散开 / 回收 ===== */
function scatter(){
  dots.forEach(d=>{
    const a=Math.random()*Math.PI*2;
    const dist=400+Math.random()*200;
    d.style.transform=`translate(${Math.cos(a)*dist}px,${Math.sin(a)*dist}px) scale(.3)`;
    d.style.opacity=0;
  });
}
function regroup(){
  dots.forEach(d=>{
    d.style.transform='translate(0,0) scale(1)';
    d.style.opacity=.6;
  });
}

/* ===== 流星 ===== */
function meteor(){
  for(let i=0;i<6;i++){
    const m=document.createElement('div');
    m.textContent='✦';
    m.style.position='absolute';
    m.style.left='280px';
    m.style.top='560px';
    m.style.color='gold';
    m.style.transition='transform 1.3s linear,opacity 1.3s';
    tree.appendChild(m);
    setTimeout(()=>{
      m.style.transform='translate(0,-500px)';
      m.style.opacity=0;
      setTimeout(()=>m.remove(),1400);
    },i*100);
  }
}

/* ===== 发送 ===== */
const sendBtn=document.getElementById('sendBtn');
const input=document.getElementById('wishInput');
const wishText=document.getElementById('wishText');
const geoText=document.getElementById('geoText');
const starInner=document.querySelector('.star-inner');

function sendWish(){
  if(!input.value.trim()) return;
  input.value='';

  meteor();
  starInner.style.transform='rotate(720deg)';
  setTimeout(()=>starInner.style.transform='rotate(0deg)',1300);

  scatter();
  wishText.style.opacity=1;

  fetch('https://ipapi.co/json/')
    .then(r=>r.json())
    .then(d=>{
      geoText.textContent=
        `[${d.longitude>=0?'E':'W'} ${Math.abs(d.longitude).toFixed(2)}°, `
        +`${d.latitude>=0?'N':'S'} ${Math.abs(d.latitude).toFixed(2)}°] 祝你今天开心`;
      geoText.style.opacity=1;
    });

  setTimeout(()=>{
    wishText.style.opacity=0;
    geoText.style.opacity=0;
    regroup();
  },3000);
}

sendBtn.onclick=sendWish;
input.addEventListener('keydown',e=>{
  if(e.key==='Enter') sendWish();
});
</script>

</body>
</html>
